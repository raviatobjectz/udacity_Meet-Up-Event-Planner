var app=angular.module("EventPlanner",["focus-if","ngMaterial","firebase","ngMessages"]);app.controller("allTabs",["$scope","$rootScope","$firebaseObject","$mdToast","$document","$timeout","$q","$element",function(e,t,a,n,s,r,i,o){var d=new Firebase("https://mini-me.firebaseio.com/USERS");e.data=a(d),e.tabHeading1="Login",e.tabHeading2="Create Event",e.tabHeading3="Events",e.tab2Disabled=!0,e.showCard=!1,e.eventtypes=["Birthday","Anniversary","Pool Party","SuperBowl","Fantasy Football","Meeting","Office","Soccer","Meetup","Event","Seminar","Conference","Bootcamp"],e.varB=!1,e.varD=!0,e.varE=!1,e.login=!1,e.user={},e.myevent={},e.showEvent={},e.myevents=[],e.editEvent=!1,e.editEventName="",e.sdateflag=!0,e.edateflag=!0,e.focusInput=0,e.states="AL AK AZ AR CA CO CT DE FL GA HI ID IL IN IA KS KY LA ME MD MA MI MN MS MO MT NE NV NH NJ NM NY NC ND OH OK OR PA RI SC SD TN TX UT VT VA WA WV WI WY".split(" ").map(function(e){return{abbrev:e}}),e.loginUser=function(){if(e.user.username in e.data)if(e.data[e.user.username].password==e.user.password){e.tabHeading1="Logged In",e.user=e.data[e.user.username],e.myevents=[];var t=0;for(var a in e.user.myevents)t++,e.myevents.push(e.user.myevents[a]);e.login=!0,e.tab2Disabled=!1,0==t?e.selectedIndex=1:e.selectedIndex=2,e.showCard=!1}else alert("Incorrect Password");else alert("Incorrect Username/Password")},e.logoutUser=function(){e.user={},e.tabHeading1="Login",e.login=!1,e.tab2Disabled=!0,e.data=a(d)},e.createUser=function(){e.varC=e.user,d.child(e.user.username).update(e.user,function(){e.varB=!1,e.varD=!0,e.varE=!1,e.tabHeading1="Logged In",e.login=!0,e.tab2Disabled=!1,e.showCard=!1,e.selectedIndex=1,e.data=a(d),e.$apply()}),e.$apply()},e.createEvent=function(t){e.showCard=!1;var n="https://mini-me.firebaseio.com/USERS/"+e.user.username+"/myevents/"+t.eventname+"/",s=new Firebase(n);t.startdate=t.sdatetime.toDateString(),t.enddate=t.edatetime.toDateString(),t.starttime=t.sdatetime.toTimeString(),t.endtime=t.edatetime.toTimeString(),"notes"in t||(t.notes=" "),"address"in t||(t.address=" "),"city"in t||(t.city=" "),"state"in t||(t.state=" "),s.set({eventname:t.eventname,startdate:t.startdate,enddate:t.enddate,starttime:t.starttime,endtime:t.endtime,address:t.address,city:t.city,state:t.state,eventhost:t.eventhost,eventtype:t.eventtype,guestlist:t.guestlist,notes:t.notes},function(t){if(t)e.OUTPUT=t;else{e.selectedIndex=2;var n=new Firebase("https://mini-me.firebaseio.com/USERS");e.newdata1=a(n),setTimeout(function(){e.newuser1=e.newdata1[e.user.username],e.myevents=[];for(var t in e.newuser1.myevents)e.myevents.push(e.newuser1.myevents[t]),e.$apply()},1e3)}}),e.$apply()},e.updateClick=function(){e.varB=!1,e.varD=!1,e.varE=!0,e.$apply()},e.openCard=function(t){e.showEvent=t,e.showEvent.guestlistJSON=JSON.stringify(e.showEvent.guestlist).replace(/\[/g,"").replace(/\]/g,"").replace(/\"/g,"").replace(/\,/g,", "),e.showCard=!0,e.$apply()},e.editCard=function(t){e.myevent=t,e.myevent.sdatetime=new Date(t.startdate+" "+t.starttime),e.myevent.edatetime=new Date(t.enddate+" "+t.endtime),e.editEvent=!0,e.tabHeading2="Edit Event",e.selectedIndex=1,e.$apply()},e.deleteCard=function(t){e.myevent=t;var a="https://mini-me.firebaseio.com/USERS/"+e.user.username+"/myevents/"+e.myevent.eventname+"/",n=new Firebase(a);n.remove();for(var s in e.myevents)e.myevents[s].eventname==e.myevent.eventname&&e.myevents.splice(s,1);e.showCard=!1,e.$apply()},e.closeCard=function(){e.showCard=!1,e.$apply()},e.checksDate=function(t){currentDt=new Date;var a=0;"undefined"==typeof t?(a=1,e.sTooltipString="Incorrect Start DateTime Fromat",e.sdateflag=!1):currentDt>t&&(a=1,e.sTooltipString="Start Date cannot be in the past",e.sdateflag=!1),0==a?(e.sTooltipString="Start Date Valid",e.sdateflag=!0):n.show(n.simple().textContent(e.sTooltipString).position("top right").hideDelay(3e3))},e.checkeDate=function(t){currentDt=new Date,sDate=e.myevent.sdatetime;var a=0;"undefined"==typeof t?(a=1,e.sTooltipString="Incorrect End DateTime Fromat",e.edateflag=!1):(currentDt>t&&(a=1,e.sTooltipString="End Date cannot be in the past",e.edateflag=!1),sDate>t&&(a=1,e.sTooltipString="End Date cannot be before start date",e.edateflag=!1)),0==a?(e.sTooltipString="Start Date Valid",e.edateflag=!0):n.show(n.simple().textContent(e.sTooltipString).position("top right").hideDelay(3e3))},e.$watch("selectedIndex",function(t,a){1==t&&0==e.editEvent&&(e.myevent={},e.myevent.eventname="",e.myevent.guestlist=[],e.myevent.eventhost=e.user.firstname+" "+e.user.lastname,e.myevent.address=e.user.address,e.myevent.city=e.user.city,e.myevent.state=e.user.state,e.myevent.guestlist.push(e.user.email)),0==t&&(e.editEvent=!1),2==t&&(e.editEvent=!1,e.tabHeading2="Create Event"),e.$apply()})}]);